:javascript
  var drawChart = function(tag, data, div, text){
  AmCharts.makeChart(div,
    {
      "type": "serial",
      "pathToImages": "http://cdn.amcharts.com/lib/3/images/",
      "categoryField": "date",
      "dataDateFormat": "YYYY-MM-DD",
      "theme": "default",
      "categoryAxis": {
        "minPeriod": "MM",
        "parseDates": true
      },
      "chartCursor": {
        "categoryBalloonDateFormat": "MMM YYYY"
      },
      "chartScrollbar": {},
      "trendLines": [],
      "graphs": [
        {
          "bullet": "round",
          "id": "AmGraph-1",
          "title": tag,
          "valueField": "posts"
        },
      ],
      "guides": [],
      "valueAxes": [
        {
          "id": "ValueAxis-1",
          "title": "Number of Questions"
        }
      ],
      "allLabels": [],
      "balloon": {},
      "legend": {
        "useGraphSettings": true
      },
      "titles": [
        {
          "id": "Title-1",
          "size": 15,
          "text": text+" "+tag
        }
      ],
      "dataProvider": data
    }
  );
  }
  function compare(a,b) {
    if (a.date < b.date)
      return -1;
    if (a.date > b.date)
       return 1;
    return 0;
  }

  $(document).ready(function(){
    tagSelected = function(e, datNum){
      console.log(datNum)
      $.ajax({
        url: "/tag",
        method: "get",
        data:{id: datNum.id},
        context: document.body
      }).done(function(resp) {
        resp.trend_data.sort(compare);
        resp.ans_data.sort(compare);
        drawChart(resp.name, resp.trend_data, "trend", "StackOverFlow Questions Tagged: ");
        drawChart(resp.name, resp.ans_data, "ans", "Average number of days to get an accepted Answer for: ");
      });
    }

    type = $('.chosen-select').typeahead({
        minLength: 1,
        highlight: true,
        hint: false
      },
      {
      name: 'tags',
      displayKey: 'name',
      source: function(query, cb){
       $.ajax({
        url: "/tags",
        data: {name: query},
        method: "get",
        context: document.body
       }).done(function(resp) {
          cb(resp)
      });
      }
    });
    type.on('typeahead:selected', tagSelected);

  })
.row
.span3
.span6
  %input{type:"text", class: "span12 chosen-select", placeholder: "Type a Tag"}
.span3
.row
  .span12#trend{style: "height:400px"}
  .span12#ans{style: "height:400px"}
  
%h4
  data dump has been taken from Stack Exchange Network. All those great Stack Overflow questions, answers, and comments, so generously contributed by all of you, are licensed under cc-wiki (also known as cc-by-sa):
=link_to "Link to License", "http://creativecommons.org/licenses/by-sa/3.0/"
