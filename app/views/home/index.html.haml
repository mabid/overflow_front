:javascript
  var drawChart = function(tag, data, div){
  AmCharts.makeChart(div,
    {
      "type": "serial",
      "pathToImages": "http://cdn.amcharts.com/lib/3/images/",
      "categoryField": "date",
      "dataDateFormat": "YYYY-MM-DD",
      "theme": "default",
      "categoryAxis": {
        "minPeriod": "MM",
        "parseDates": true
      },
      "chartCursor": {
        "categoryBalloonDateFormat": "MMM YYYY"
      },
      "chartScrollbar": {},
      "trendLines": [],
      "graphs": [
        {
          "bullet": "round",
          "id": "AmGraph-1",
          "title": "graph 1",
          "valueField": "posts"
        },
      ],
      "guides": [],
      "valueAxes": [
        {
          "id": "ValueAxis-1",
          "title": "Number of Questions"
        }
      ],
      "allLabels": [],
      "balloon": {},
      "legend": {
        "useGraphSettings": true
      },
      "titles": [
        {
          "id": "Title-1",
          "size": 15,
          "text": "StackOverflow Questions tagged "+tag
        }
      ],
      "dataProvider": data
    }
  );
  }
  function compare(a,b) {
    if (a.date < b.date)
      return -1;
    if (a.date > b.date)
       return 1;
    return 0;
  }

  $(document).ready(function(){
    tagSelected = function(e, datNum){
      console.log(datNum)
      $.ajax({
        url: "/tag",
        method: "get",
        data:{id: datNum.id},
        context: document.body
      }).done(function(resp) {
        resp.data.sort(compare);
        drawChart(resp.name, resp.data);
      });
    }

    var bestPictures = new Bloodhound({
      datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
      queryTokenizer: Bloodhound.tokenizers.whitespace,
      remote: '/tags?name=%QUERY'
    });
 
    bestPictures.initialize();

    type = $('.chosen-select').typeahead({
        minLength: 3,
        highlight: true,
        hint: false
      },
      {
      name: 'tags',
      displayKey: 'name',
      source: function(query, cb){
       $.ajax({
        url: "/tags",
        data: {name: query},
        method: "get",
        context: document.body
       }).done(function(resp) {
          cb(resp)
      });
      }
    });
    type.on('typeahead:selected', tagSelected);

  })
%h1
  Welcome OverFlow Stats Fun
%h2
  data dump has been taken from Stack Exchange Network. All those great Stack Overflow questions, answers, and comments, so generously contributed by all of you, are licensed under cc-wiki (also known as cc-by-sa):
=link_to "Link to License", "http://creativecommons.org/licenses/by-sa/3.0/"
%br
%br
%br
%br
%input{type:"text", class: "chosen-select", placeholder: "Type a Tag"}
%div{id:"chartdiv", style:"width: 100%; height: 400px; background-color: #FFFFFF;"}
  
